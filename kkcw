#!/bin/bash

[ "$1" == "--help" ] && {
	cat <<- FIN >&2
	kkcw: kkc wrapper
	usage: echo <words> | kkcw

	copyright 2019 Ryuichi Ueda
	Licensed under the GNU GPLv3. See the file COPYING for details.
	FIN
	exit 1
}

single_word () {
	kkc <<< "$1"                    |
	grep -o '0: .*'                 |
	sed 's@<\([^/]*\)/[^>]*>@\1@g'  |
	sed 's/^0: //'
}

multi_words () {
	xargs -n 1                           | 
	while read w ; do single_word "$w"; done  |
	xargs
}

single_word_multi_results () {
	kkc <<< "$1 $2"                 |
	grep -oE '[0-9]+: .*'           |
	sed 's@<\([^/]*\)/[^>]*>@\1@g'  |
	sed  -r 's/^[0-9]+: //'
}

multi_words
#single_word_multi_results "やまだ" 10
